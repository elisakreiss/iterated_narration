<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="UTF-8" />
		
		<title>browser-based experiments</title>

		<!-- fonts from Google fonts -->
		<link href="https://fonts.googleapis.com/css?family=Noto+Sans:400,700|Noto+Serif:400,700|Playfair+Display:700" rel="stylesheet">

		<!-- css -->
		<link rel="stylesheet" type="text/css" href="styles/styles.css">

		<!-- js dependencies -->
		<script src="libraries/mustache/mustache.min.js"></script>
		<script src="libraries/jquery/dist/jquery.min.js"></script>
		<script src="libraries/browserCheck.js"></script>
		<!-- This doesn't seem to be there on cloudflare -->
		<script src="libraries/csv-js/csv.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.5/lodash.js"></script>

		<!-- config -->
		<script src="config/config_deploy.js"></script>

		<!-- local js files -->
		<script src="scripts/main.js"></script>
		<script src="scripts/experiment.js"></script>
		<script src="scripts/helpers.js"></script>
		<script src="scripts/submit_to_server.js"></script>
		
		<!-- local trial_info files -->
		<script src="trial_info/main_trials.js"></script>

		<!-- views -->
		<script src="views/views.js"></script>


	</head>

	<body>
		<noscript>This task requires JavaScript. Please enable JavaScript in your browser and reload the page. For more information on how to do that, please refer to
			<a href='https://enable-javascript.com' target='_blank'>enable-javascript.com</a>
		</noscript>

		<!-- views are inserted in main -->
		<main id='main'>
			Loading...
		</main>

		<!-- Mustache templates below. Each template is a view with a separate HTML structure. -->

		<!-- Introduction view -->
		<script id="intro-view" type="text/html">
		<div class='view'>
			{{# title }}
			<h1 class="title">{{ title }}</h1>
			{{/ title }}
			{{# text }}
			<section class="text-container">
				<p class="text">{{ text }}</p>
			</section>
			{{/ text }}
			<br>
			<br>
			{{# legal_info }}
			<section class="text-container">
				<p class="legal-text">{{{ legal_info }}}</p>
			</section>
			{{/ legal_info }}
			{{# button }}
			<button id="next">{{ button }}</button>
			{{/ button }}

			<!-- {{^ button }}
			<button id="next">Begin Experiment</button>
			{{/ button }} -->
		</div>
		</script>

		<!-- Instructions view -->
		<script id="instructions-view" type="text/html">
		<div class="view">
			{{# title }}
			<h1>{{ title }}</h1>
			{{/ title }}
			{{# text }}
			<section class="text-container">
				<p class="text">{{{ text }}}</p>
			</section>
			{{/ text }}
			{{# button }}
			<button id="next">{{ button }}</button>
			{{/ button }}
		</view>
		</script>

		<!-- main view (buttons response) -->
		<!-- <script id="main-view" type="x-tmpl-mustache"> -->
		<script id="main-view" type="text/html">
			<div class="view">
			
			<section class="text-container">
				<p class="help-text">{{ recap_instruction }}</p>
			</section>
			<br>

			<section class="text-container">
				<p class="text" id="story_text">{{ story_text }}</p>
			</section>

			{{# button1 }}
			<button id="start_repro">{{ button1 }}</button>
			{{/ button1 }}

			<p class="answer-container">
				<textarea rows="12" cols="60" id="reproduction" placeholder="Please insert your answer here."></textarea> <br>
			</p>

			{{# button2 }}
			<button style="visibility: hidden" id="next">{{ button2 }}</button>
			{{/ button2 }}

			<section class="answer-container">
				<p class="text" id="error_emptyrepro" style="visibility: hidden">
					Please retell the story you just read. Your answer seems unreasonably short.
				</p>
			</section>

			</div>
		</script>

		<!-- Questions about guilt -->
		<script id="trial-view-slider-response" type="text/html">
			<div class="view">

				<!-- <div class="progress-bar-container">
					<p>progress</p>
					<div class="progress-bar"><span id='filled'><span></div>
				</div> -->

				{{# title }}
				<h1 class="title">{{ title }}</h1>
				{{/ title }}

				<!-- <div class="clearfix"></div> -->

			<div id="question1">
				<p class="question">
					How likely is it in your opinion, that the main character(s) in the <strong>first story</strong> actually committed the crime?
				</p>
				<p class="answer-container slider-container">
					<span class="not_guilty">not guilty</span>
					<input type="range" id="response1" class="slider-response" min="0" max="100" value="50"/>
					<span class="guilty">guilty</span>
				</p>
			</div>

			<div id="question2">
				<p class="question">
					How likely is it in your opinion, that the main character(s) in the <strong>second story</strong> actually committed the crime?
				</p>
				<p class="answer-container slider-container">
					<span class="not_guilty">not guilty</span>
					<input type="range" id="response2" class="slider-response" min="0" max="100" value="50"/>
					<span class="guilty">guilty</span>
				</p>
			</div>

			<button id="next" class="nodisplay">Next</button>
			<button id="next_trial" class="nodisplay">Next</button>
			</div>
		</script>


		<!-- post test view -->
		<script id="post-test-view" type="text/html">
		<div class="view post-test-templ">
			{{# title }}
			<h1>{{ title }}</h1>
			{{/ title }}
			{{# text }}
			<section class="text-container">
				<p class="text">{{ text }}</p>
			</section>
			{{/ text }}
			<form>
				<p>Have you heard any of these stories before?
					<select id="familiar">
					    <label><option value="-1"></option></label>
					    <label><option value="No">No</option></label>
					    <label><option value="Yes_first">Yes, the first one</option></label>
					    <label><option value="Yes_second">Yes, the second one</option></label>
					    <label><option value="Yes_both">Yes, both</option></label>
					</select>
				</p>

				<p>Did you read the instructions and do you think you did the HIT correctly?
					<select id="assess">
					    <label><option value="-1"></option></label>
					    <label><option value="No">No</option></label>
					    <label><option value="Yes">Yes</option></label>
					    <label><option value="Confused">I was confused</option></label>
					</select>
			    </p>

				<p>Gender:
				    <select id="gender">
					    <label><option value=""></option></label>
					    <label><option value="Male">Male</option></label>
					    <label><option value="Female">Female</option></label>
					    <label><option value="Other">Other</option></label>
				    </select>
				</p> 
				<p>
					<label for="age">Age:</label>
					<input type="number" name="age" min="18" max="110" id="age" />
				</p>
				<p>Level Of Education:
			        <select id="education">
			            <label><option value="-1"></option></label>
			            <label><option value="0">Some High School</option></label>
			            <label><option value="1">Graduated High School</option></label>
			            <label><option value="2">Some College</option></label>
			            <label><option value="3">Graduated College</option></label>
			            <label><option value="4">Hold a higher degree</option></label>
			        </select>
			    </p>
				<p>
					<label for="languages" name="languages">Native Languages: <br /><span>(i.e. the language(s) spoken at home when you were a child)</</span></label>
					<input type="text" id="languages"/>
				</p>
				<p>Did you enjoy the hit?
					<select id="enjoyment">
					    <label><option value="-1"></option></label>
					    <label><option value="0">Worse than the Average HIT</option></label>
					    <label><option value="1">An Average HIT</option></label>
					    <label><option value="2">Better than average HIT</option></label>
					</select>
				</p>
				<p class="comment-sect">
					<label for="comments">Please enter your name here, so we can grant you your credit. You can also use this space for further comments.</label>
					<textarea name="comments" id="comments" rows="6" cols="40"></textarea>
				</p>
				{{# buttonText }}
				<button id="next">{{ buttonText }}</button>
				{{/ buttonText }}
				{{^ buttonText }}
				<button id="next">Next</button>
				{{/ buttonText }}
			</form>
		</div>
		</script>

	<!-- Thanks View -->
	<script id="thanks-view" type="text/html">
		<div class="view thanks-templ">
			<h4 class="warning-message">Please do not close this tab until you see a <strong>&#10004; Submission Successful</strong> message on the screen.</h4>
			{{# thanksMessage }}
			<h1 class="thanks-message nodisplay">{{ thanksMessage }}</h1>
			{{/ thanksMessage }}
			{{^ thanksMessage }}
			<h1 class="thanks-message nodisplay">Thank you for taking part in this experiment!</h1>
			{{/ thanksMessage }}
			<h4 class="success-message nodisplay"><strong>&#10004; Submission Successful!</strong></h4>
			{{# extraMessage }}
			<h4 class="extra-message nodisplay">{{{ extraMessage }}}</h4>
			{{/ extraMessage }}
		</div>
	</script>
	</body>
</html>
